#!/usr/bin/env bash
# source ~/.zenix/env

export ZENIX_ROOT="$HOME/.zenix"
export PATH="$ZENIX_ROOT/bin:$PATH"

# Auto-import skill env files marked with @always
if [[ -n "$ZSH_VERSION" ]]; then
    for _skill_env in "$ZENIX_ROOT"/skills/*/*/env(N); do
        [[ -f "$_skill_env" ]] && head -3 "$_skill_env" | grep -q '^# @always' && source "$_skill_env"
    done
elif [[ -n "$BASH_VERSION" ]]; then
    shopt -s nullglob
    for _skill_env in "$ZENIX_ROOT"/skills/*/*/env; do
        [[ -f "$_skill_env" ]] && head -3 "$_skill_env" | grep -q '^# @always' && source "$_skill_env"
    done
fi
unset _skill_env
